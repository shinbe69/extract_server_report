<!DOCTYPE html>
<html>
    <head>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <title>Nháº­p thÃ´ng tin</title>
        <style>
            body {
                height: 100vh;
                box-sizing: border-box;
                margin: 0;
                padding: 0;
                display: flex;
                font-size: large;
                font-family: "Roboto", sans-serif;
            }
            form {
                width: 70%;
                box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
                border-radius: 0.4em;
                padding: 1em;
            }
            .inputWrapper {
              margin: 1em;
              display: flex;
              
            }
            h1 {
                text-align: center;
                margin: 1em 0;
            }
            h3 {
              text-decoration-line: underline;
              text-decoration-thickness: 1.5px;
            }
            input[type=submit] {
                width: 6em;
                height: 2em;
                margin: 2em auto 0 auto;
                font-size: large;
            }
            input[type=text] {
                width: 95%;
                padding: 0.2em;
                font-style: italic;
                font-size: large;
                border: none;
                outline: none;
            }
            #submitWrapper {
              width: 100%;
              display: flex;
            }
            #file-viewer {
              width: 30%;
              padding: 1em 0.5em;
              overflow: hidden;
            }
            #file-viewer h3 {
              text-align: center;
            }
            hr {
              height: 80%;
              padding: 0;
              margin: auto 0;
            }
            #formContent {
              display: flex;
              width: 100%;
            }
            #reportInfo {
              width: 50%;
            }
            #deviceInfo {
              width: 50%;
            }
            table {}
            td, th {
              border: 1px solid #dddddd;
              text-align: left;
              
            }
        </style>
    </head>
<body>

<div id="file-viewer">
  <h3>File report preview</h3>
  <iframe src="../exec_daily_2025-06-24.pdf" width="100%" height="100%"></iframe>
</div>
<hr>
<form id="sendDataForm">
  <h1>Cáº­p nháº­t thÃ´ng tin bÃ¡o cÃ¡o hoáº¡t Ä‘á»™ng mÃ¡y chá»§</h1>
  <div id="formContent">
    <div id="reportInfo">
      <h3>Report info</h3>
      <table>
        <tr>
          <td>Date:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>Type:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
      </table>
    </div>
    <div id="deviceInfo">
      <h3>Device info</h3>
      <table>
        <tr>
          <td>Organization:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>Country:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>City:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>Serial:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>License ID:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>Hostname:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>Firmware version:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
        <tr>
          <td>Uptime:</td>
          <td><input type="text" id="organization" name="organization" ></td>
        </tr>
      </table>
    </div>
  </div>
  <div id="submitWrapper">
    <input type="submit" value="LÆ°u">
  </div>
</form>

</body>

</html>
<script>
  $(document).ready(() => {
    console.log('Script ready...')
    fetch('http://mrns.bvhungvuong.vn:3002/list')
    .then(res => res.json())
    .then(res => {
      res.forEach(singleData => {
        $("ol").append(`<li><b>${singleData.content}</b></li>`)
      })
    })
    .catch((err) => console.log('Error:', err))
    document.getElementById('sendDataForm').addEventListener('submit', async (event) => {
      event.preventDefault(); // Prevent the default form submission
      if (event.target.situation.value === '' || event.target.correct_answer.value === '') alert('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin!')
      else {
        const formData = new FormData(event.target);
        const data = Object.fromEntries(formData.entries()); // Convert FormData to an object
        try {
            const response = await fetch('http://mrns.bvhungvuong.vn:3002/data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data),
            });
    
            if (response.ok) {
              let result = await response.json();
              document.getElementById('situation').value = ''
              $('input[type=radio]').prop('checked',false);
              $("ol").append(`<li><b>${result.content}</b></li>`)
            } else {
            console.error('Error:', response.statusText);
            alert('Something went wrong ðŸ˜¢');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('Could not connect to the API ðŸš¨');
        }
    }
    });
  })
    
  </script>
  